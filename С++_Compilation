# Компиляция языка С++

## Флаги

-o (output) - указание выходного файла
-c (compile only) - только компиляция

```
g++ -c main.cpp        # → main.o
g++ -c functions.cpp   # → functions.o
g++ main.o functions.o -o program  # Линковка
```

-g (debug) - отладочная информация
gdb ./program

-O (optimize) - оптимизация

#### Уровни оптимизации:

    -O0 - без оптимизации (лучше для отладки)

    -O1 - базовая оптимизация

    -O2 - стандартная оптимизация (рекомендуется)

    -O3 - агрессивная оптимизация

    -Os - оптимизация по размеру

```
g++ -O2 main.cpp -o program
```

#### **`-Wall`, `-Wextra` - предупреждения**

**Что делают:** Включают дополнительные предупреждения компилятора.

* **`-Wall`** - все основные предупреждения
* **`-Wextra`** - ещё больше предупреждений
* **`-Werror`** - трактовать предупреждения как ошибки

```
g++ -Wall -Wextra main.cpp -o program
```

#### **`-std` - стандарт языка**

**Что делает:** Указывает версию стандарта C++.

```
g++ -std=c++11 main.cpp
```

#### **`-I` (include) - пути к заголовочным файлам**

**Что делает:** Добавляет путь для поиска заголовочных файлов.

```
g++ -I./include -I/usr/local/include main.cpp
```

#### **`-L` и `-l` - работа с библиотеками**

* **`-L`** - путь к папке с библиотеками
* **`-l`** - имя библиотеки (без префикса `lib` и суффикса `.a`)

```
g++ main.cpp -L./lib -lmylib -lpthrea
```

#### **`-D` (define) - определение макросов**

**Что делает:** Создаёт макрос для препроцессора.

```
#define DEBUG
#define VERSION 2
```


### **Практическая аналогия**

Представьте, что компиляция - это  **сборка мебели из IKEA** :

* **`-c`** = Распаковать детали и подготовить их, но не собирать
* **`-o`** = Написать своё название на готовой мебели (вместо стандартного)
* **`-g`** = Добавить инструкцию с номерами шагов для отладки
* **`-O2`** = Оптимизировать процесс сборки для лучшей производительности
* **`-Wall`** = Проверить, все ли детали на месте, перед сборкой
* **`-I`** = Указать, где лежат дополнительные инструменты
* **`-L`/`-l`** = Взять дополнительные детали из другой коробки

### **Типичные комбинации**


```
g++ -g -Wall -Wextra -O0 -std=c++20 main.cpp -o program
```

Стандартная для разроботки

```
g++ main.cpp -o program
```

Простая компиляция

```
./program
```

запуск скомпилированной программы

g++ main.cpp functions.cpp -o program - компиляция нескольких файлов

* **Точка входа** в любую программу на C/C++ - это функция `main()`
* При компиляции нескольких файлов компилятор ищет функцию `main()` и делает её **точкой входа** в программу
* В вашем примере функция `main()` должна находиться в файле `main.cpp`
